from fastapi import Request

TRANSLATIONS = {
    "en": {
        # Nav
        "nav_dashboard": "Dashboard",
        "nav_admin": "Admin",
        "nav_logout": "Logout",
        "nav_back": "Back",
        "nav_login": "Login",
        "nav_signup": "Sign Up",
        "nav_settings": "Settings",
        "nav_signout": "Sign out",
        "nav_profile": "Profile",
        "nav_billing": "Billing",
        "nav_topup": "Top Up",
        "nav_generations": "Generations",
        "nav_workshop": "Workshop",
        "nav_models": "Models",
        "nav_providers": "Providers",
        "nav_users": "Users",
        "nav_curr_balance": "Current Balance",
        
        # Landing
        "land_hero_title": "Generate Art with AI",
        "land_hero_desc": "Create stunning images and videos in seconds using our advanced ArtLine API. Simple credit-based pricing, no subscription required.",
        "land_cta_dash": "Go to Dashboard",
        "land_cta_start": "Get Started",
        "land_cta_login": "Log In",
        "land_pricing_title": "Pricing",
        
        "price_starter": "Starter",
        "price_pro": "Pro",
        "price_ent": "Enterprise",
        "price_img": "Images",
        "price_vid": "Videos",
        "price_credits": "Credits",
        "price_std_speed": "Standard Speed",
        "price_prio_supp": "Priority Support",
        "price_bulk": "Bulk Generation",
        "price_api": "API Access",
        "price_247": "24/7 Support",

        # Auth
        "auth_login_title": "Login",
        "auth_signup_title": "Sign Up",
        "auth_email": "Email address",
        "auth_pass": "Password",
        "auth_btn_signin": "Sign In",
        "auth_btn_create": "Create Account",
        "auth_link_need_acc": "Need an account? Sign up",
        "auth_link_have_acc": "Already have an account? Login",
        "auth_err_creds": "Invalid credentials",
        "auth_err_email_taken": "Email already registered",

        # Dashboard / Sidebar
        "balance_title": "Balance",
        "balance_desc": "Credits (CR) used for image & video generation",
        "buy_credits": "Buy 100 Credits (1000 ₽)",
        "payment_integ": "(Payment integration required)",
        "create_job": "Create Job",
        "format_label": "Format",
        "model_label": "AI Model",
        "prompt_label": "Prompt",
        "prompt_placeholder": "A cinematic drone shot of a futuristic neon city...",
        "generate_btn": "Generate",
        "fmt_image": "Image",
        "fmt_video": "Video",
        "wb_mode_image": "Image Mode",
        "wb_mode_video": "Video Mode",
        "wb_tab_txt2img": "Text to Image",
        "wb_tab_img2img": "Image to Image",
        "wb_prompt_tips": "Prompt tips",
        "wb_select_model": "Select Model",
        "wb_limit_msg": "You've reached your free limit.",
        "wb_subscribe": "Subscribe now",
        "wb_generating": "Generating...",
        "wb_started": "Started",
        "wb_comm_gallery": "Community Creations",
        "wb_loading_gal": "Loading gallery...",
        "wb_no_models": "No models available",
        "wb_gen_failed": "Generation failed",
        "btn_view": "View",

        
        # Dashboard / Gallery
        "gallery_title": "Your Gallery",
        "no_jobs_title": "No jobs found",
        "no_jobs_desc": "Start by creating your first masterpiece!",
        
        # Job Status / Modal
        "status_queued": "Queued",
        "status_running": "Running",
        "status_succeeded": "Succeeded",
        "status_failed": "Failed",
        "modal_details": "Job Details",
        "modal_id": "ID",
        "modal_date": "Date",
        "modal_status": "Status",
        "modal_cost": "Cost",
        "modal_prompt": "Prompt",
        "modal_download": "Download Original",

        # Admin Common
        "adm_dash_title": "Admin Dashboard",
        "adm_back_dash": "Back to Dashboard", # Means back to USER dashboard or main? "Back to Dashboard" usually means Main Admin Dash
        "adm_stat_users": "Total Users",
        "adm_stat_jobs": "Total Jobs",
        "adm_stat_active": "Active Jobs",
        "adm_stat_credits": "Total Credits",
        
        # Admin Providers
        "adm_prov_title": "AI Providers",
        "adm_btn_manage": "Manage Providers",
        "adm_prov_desc": "Configure API keys for OpenAI, Stability, Runway, and more.",
        "adm_btn_seed": "Seed Demo Data",
        "adm_btn_add": "Add New Provider",
        "adm_th_provider": "Provider",
        "adm_th_name": "Name",
        "adm_th_key": "Key (Last 4)",
        "adm_th_status": "Status",
        "adm_th_actions": "Actions",
        "adm_lbl_name_alias": "Name / Alias",
        "adm_lbl_apikey": "API Key",
        "adm_btn_test": "Test Connection",
        "adm_btn_save": "Save Config",

        # Admin Users
        "adm_users_title": "User Management",
        "adm_recent_users": "Recent Users",
        "adm_manage_desc": "Manage user credits and permissions in the Users tab.",
        "adm_btn_view_all": "View All",
        "adm_th_role": "Role",
        "adm_th_joined": "Date Joined",
        "adm_btn_credits": "+ Credits",
        "adm_mod_add_credits": "Add Credits",
        "adm_models_title": "AI Models",
        "adm_btn_manage_models": "Manage Models",
        "adm_models_desc": "Add and configure dynamic Replicate models.",
        "adm_no_provs": "No providers configured",
        "adm_no_users": "No users found",
        "adm_status_active": "Active",
        "adm_status_active": "Active",
        "adm_status_disabled": "Disabled",
        "adm_btn_add_model": "Add Replicate Model",
        "adm_th_ref": "Reference (ID)",
        "adm_th_type": "Type",
        "adm_th_example": "Example",
        "adm_btn_conf": "Configure",
        "adm_mod_add_new": "Add New Model",
        "adm_lbl_ref": "Replicate Model ID",
        "adm_ph_ref": "owner/name (e.g. stability-ai/sdxl)",
        "adm_help_fetch": "We will fetch the latest version and schema automatically.",
        "adm_btn_fetch": "Fetch & Add",
        "adm_no_models": "No models added yet.",
        "adm_role_admin": "Admin",
        "adm_role_user": "User",
        "adm_btn_cancel": "Cancel",
        "adm_btn_add_bal": "Add to balance",
        "adm_txt_add_cred_for": "Add credits for user:",

        "adm_prov_configured": "Configured Providers",
        "adm_th_updated": "Updated",
        "adm_status_valid": "Valid",
        "adm_status_invalid": "Invalid",
        "adm_status_nottested": "Not Tested",
        "adm_btn_del": "Del",
        "adm_sel_placeholder": "Select Provider...",
        "adm_js_spaces": "Key cannot be spaces",
        "adm_js_invalid_fmt": "Invalid format for",
        "adm_js_test_passed": "Test Passed!",
        "adm_js_error": "Error",
        "adm_js_testing": "Testing...",


    },
    "ru": {
        "nav_dashboard": "Дашборд",
        "nav_admin": "Админка",
        "nav_logout": "Выйти",
        "nav_back": "Назад",
        "nav_login": "Вход",
        "nav_signup": "Регистрация",
        "nav_settings": "Настройки",
        "nav_signout": "Выйти",
        "nav_profile": "Профиль",
        "nav_billing": "Биллинг",
        "nav_topup": "Пополнить",
        "nav_generations": "Генерации",
        "nav_workshop": "Мастерская",
        "nav_models": "Модели",
        "nav_providers": "Провайдеры",
        "nav_users": "Пользователи",
        "nav_curr_balance": "Текущий баланс",
        
        "land_hero_title": "Генерируйте Арт с ИИ",
        "land_hero_desc": "Создавайте потрясающие изображения и видео за секунды с ArtLine API. Простая система кредитов, без подписок.",
        "land_cta_dash": "Перейти в Дашборд",
        "land_cta_start": "Начать",
        "land_cta_login": "Войти",
        "land_pricing_title": "Цены",
        
        "price_starter": "Стартовый",
        "price_pro": "Про",
        "price_ent": "Бизнес",
        "price_img": "Изображений",
        "price_vid": "Видео",
        "price_credits": "Кредитов",
        "price_std_speed": "Стандартная скорость",
        "price_prio_supp": "Приоритетная поддержка",
        "price_bulk": "Массовая генерация",
        "price_api": "Доступ к API",
        "price_247": "Поддержка 24/7",

        "auth_login_title": "Вход",
        "auth_signup_title": "Регистрация",
        "auth_email": "Email адрес",
        "auth_pass": "Пароль",
        "auth_btn_signin": "Войти",
        "auth_btn_create": "Создать аккаунт",
        "auth_link_need_acc": "Нет аккаунта? Зарегистрироваться",
        "auth_link_have_acc": "Есть аккаунт? Войти",
        "auth_err_creds": "Неверные данные",
        "auth_err_email_taken": "Email уже занят",

        "balance_title": "Баланс",
        "balance_desc": "Кредиты (CR) используются для генерации",
        "buy_credits": "Купить 100 CR (1000 ₽)",
        "payment_integ": "(Нужна интеграция оплаты)",
        "create_job": "Создать",
        "format_label": "Формат",
        "model_label": "AI Модель",
        "prompt_label": "Промпт",
        "prompt_placeholder": "Кинематографичный кадр футуристичного города...",
        "generate_btn": "Создать",
        "fmt_image": "Изображение",
        "fmt_video": "Видео",
        "wb_mode_image": "Режим Изображения",
        "wb_mode_video": "Режим Видео",
        "wb_tab_txt2img": "Текст в Картинку",
        "wb_tab_img2img": "Картинка в Картинку",
        "wb_prompt_tips": "Подсказки",
        "wb_select_model": "Выбрать Модель",
        "wb_limit_msg": "Лимит исчерпан.",
        "wb_subscribe": "Подписаться",
        "wb_generating": "Генерация...",
        "wb_started": "Начато",
        "wb_comm_gallery": "Работы Сообщества",
        "wb_loading_gal": "Загрузка галереи...",
        "wb_no_models": "Нет моделей",
        "wb_gen_failed": "Генерация не удалась",
        "btn_view": "Просмотр",

        
        "gallery_title": "Галерея",
        "no_jobs_title": "Нет работ",
        "no_jobs_desc": "Создайте свой первый шедевр!",
        
        "status_queued": "В очереди",
        "status_running": "В процессе",
        "status_succeeded": "Готово",
        "status_failed": "Ошибка",
        "modal_details": "Детали работы",
        "modal_id": "ID",
        "modal_date": "Дата",
        "modal_status": "Статус",
        "modal_cost": "Цена",
        "modal_prompt": "Промпт",
        "modal_download": "Скачать оригинал",

        "adm_dash_title": "Админ-панель",
        "adm_back_dash": "Назад в Дашборд",
        "adm_stat_users": "Всего пользователей",
        "adm_stat_jobs": "Всего задач",
        "adm_stat_active": "Активные задачи",
        "adm_stat_credits": "Всего кредитов",
        
        "adm_prov_title": "AI Провайдеры",
        "adm_btn_manage": "Управление",
        "adm_prov_desc": "Настройка ключей API для OpenAI, Stability и др.",
        "adm_btn_seed": "Заполнить Демо",
        "adm_btn_add": "Добавить провайдера",
        "adm_th_provider": "Провайдер",
        "adm_th_name": "Название",
        "adm_th_key": "Ключ (Посл. 4)",
        "adm_th_status": "Статус",
        "adm_th_actions": "Действия",
        "adm_lbl_name_alias": "Название / Алиас",
        "adm_lbl_apikey": "API Ключ",
        "adm_btn_test": "Тест соединения",
        "adm_btn_save": "Сохранить",

        "adm_users_title": "Управление пользователями",
        "adm_recent_users": "Новые пользователи",
        "adm_manage_desc": "Управление кредитами и правами.",
        "adm_btn_view_all": "Все пользователи",
        "adm_th_role": "Роль",
        "adm_th_joined": "Дата регистрации",
        "adm_btn_credits": "+ Кредиты",
        "adm_mod_add_credits": "Добавить кредиты",
        "adm_models_title": "AI Модели",
        "adm_btn_manage_models": "Управление моделями",
        "adm_models_desc": "Добавление и настройка моделей Replicate.",
        "adm_no_provs": "Нет настроенных провайдеров",
        "adm_no_users": "Пользователи не найдены",
        "adm_status_active": "Активен",
        "adm_status_active": "Активен",
        "adm_status_disabled": "Отключен",
        "adm_btn_add_model": "Добавить модель Replicate",
        "adm_th_ref": "ID Модели",
        "adm_th_type": "Тип",
        "adm_th_example": "Пример",
        "adm_btn_conf": "Настроить",
        "adm_mod_add_new": "Добавить новую модель",
        "adm_lbl_ref": "Replicate ID",
        "adm_ph_ref": "owner/name (напр. stability-ai/sdxl)",
        "adm_help_fetch": "Мы автоматически загрузим последнюю версию.",
        "adm_btn_fetch": "Добавить",
        "adm_no_models": "Моделей пока нет.",
        "adm_role_admin": "Админ",
        "adm_role_user": "Пользователь",
        "adm_btn_cancel": "Отмена",
        "adm_btn_add_bal": "Пополнить",
        "adm_txt_add_cred_for": "Кредиты для:",

        "adm_prov_configured": "Настроенные провайдеры",
        "adm_th_updated": "Обновлено",
        "adm_status_valid": "Валиден",
        "adm_status_invalid": "Невалиден",
        "adm_status_nottested": "Не проверен",
        "adm_btn_del": "Удал",
        "adm_sel_placeholder": "Выберите провайдера...",
        "adm_js_spaces": "Ключ не может содержать пробелы",
        "adm_js_invalid_fmt": "Неверный формат для",
        "adm_js_test_passed": "Тест пройден!",
        "adm_js_error": "Ошибка",
        "adm_js_testing": "Тестирование...",


    },
    "kk": {
        "nav_dashboard": "Басқару панелі",
        "nav_admin": "Әкімші",
        "nav_logout": "Шығу",
        "nav_back": "Артқа",
        "nav_login": "Кіру",
        "nav_signup": "Тіркелу",
        "nav_settings": "Баптаулар",
        "nav_signout": "Шығу",
        "nav_profile": "Профиль",
        "nav_billing": "Биллинг",
        "nav_topup": "Толықтыру",
        "nav_generations": "Генерациялар",
        "nav_workshop": "Шеберхана",
        "nav_models": "Модельдер",
        "nav_providers": "Провайдерлер",
        "nav_users": "Қолданушылар",
        "nav_curr_balance": "Ағымдағы баланс",
        
        "land_hero_title": "ИИ көмегімен өнер жасаңыз",
        "land_hero_desc": "ArtLine API арқылы керемет суреттер мен бейнелерді секундтарда жасаңыз. Қарапайым кредит жүйесі.",
        "land_cta_dash": "Панельге өту",
        "land_cta_start": "Бастау",
        "land_cta_login": "Кіру",
        "land_pricing_title": "Бағалар",
        
        "price_starter": "Бастауыш",
        "price_pro": "Про",
        "price_ent": "Бизнес",
        "price_img": "Сурет",
        "price_vid": "Видео",
        "price_credits": "Кредит",
        "price_std_speed": "Стандартты жылдамдық",
        "price_prio_supp": "Басымды қолдау",
        "price_bulk": "Жаппай генерация",
        "price_api": "API қолжетімділігі",
        "price_247": "24/7 Қолдау",

        "auth_login_title": "Кіру",
        "auth_signup_title": "Тіркелу",
        "auth_email": "Email мекенжайы",
        "auth_pass": "Құпия сөз",
        "auth_btn_signin": "Кіру",
        "auth_btn_create": "Аккаунт құру",
        "auth_link_need_acc": "Аккаунт керек пе? Тіркеліңіз",
        "auth_link_have_acc": "Аккаунт бар ма? Кіріңіз",
        "auth_err_creds": "Қате деректер",
        "auth_err_email_taken": "Email тіркелген",

        "balance_title": "Баланс",
        "balance_desc": "Генерация үшін кредиттер (CR) қолданылады",
        "buy_credits": "100 CR сатып алу (1000 ₽)",
        "payment_integ": "(Төлем жүйесі қосылмаған)",
        "create_job": "Жаңа жұмыс",
        "format_label": "Формат",
        "model_label": "AI Моделі",
        "prompt_label": "Промпт",
        "prompt_placeholder": "Болашақ қаланың кинематографиялық көрінісі...",
        "generate_btn": "Генерациялау",
        "fmt_image": "Сурет",
        "fmt_video": "Видео",
        "wb_mode_image": "Сурет режимі",
        "wb_mode_video": "Видео режимі",
        "wb_tab_txt2img": "Мәтіннен сурет",
        "wb_tab_img2img": "Суреттен сурет",
        "wb_prompt_tips": "Кеңестер",
        "wb_select_model": "Модель таңдау",
        "wb_limit_msg": "Лимит таусылды.",
        "wb_subscribe": "Жазылу",
        "wb_generating": "Генерация...",
        "wb_started": "Басталды",
        "wb_comm_gallery": "Қоғамдастық жұмыстары",
        "wb_loading_gal": "Галерея жүктелуде...",
        "wb_no_models": "Модельдер жоқ",
        "wb_gen_failed": "Генерация сәтсіз",
        "btn_view": "Көру",

        
        "gallery_title": "Галерея",
        "no_jobs_title": "Жұмыстар жоқ",
        "no_jobs_desc": "Алғашқы туындыңызды жасаңыз!",
        
        "status_queued": "Кезекте",
        "status_running": "Орындалуда",
        "status_succeeded": "Дайын",
        "status_failed": "Қате",
        "modal_details": "Жұмыс мәліметтері",
        "modal_id": "ID",
        "modal_date": "Күні",
        "modal_status": "Күйі",
        "modal_cost": "Құны",
        "modal_prompt": "Промпт",
        "modal_download": "Түпнұсқаны жүктеу",

        "adm_dash_title": "Әкімші тақтасы",
        "adm_back_dash": "Панельге қайту",
        "adm_stat_users": "Барлық қолданушылар",
        "adm_stat_jobs": "Барлық жұмыстар",
        "adm_stat_active": "Белсенді",
        "adm_stat_credits": "Барлық кредиттер",
        
        "adm_prov_title": "AI Провайдерлері",
        "adm_btn_manage": "Басқару",
        "adm_prov_desc": "OpenAI, Stability кілттерін баптау.",
        "adm_btn_seed": "Демо деректер",
        "adm_btn_add": "Провайдер қосу",
        "adm_th_provider": "Провайдер",
        "adm_th_name": "Атауы",
        "adm_th_key": "Кілт (Соңғы 4)",
        "adm_th_status": "Күйі",
        "adm_th_actions": "Әрекеттер",
        "adm_lbl_name_alias": "Атау / Лақап",
        "adm_lbl_apikey": "API Кілт",
        "adm_btn_test": "Тексеру",
        "adm_btn_save": "Сақтау",

        "adm_users_title": "Қолданушыларды басқару",
        "adm_recent_users": "Соңғылар",
        "adm_manage_desc": "Кредиттер мен құқықтарды басқару.",
        "adm_btn_view_all": "Барлығын көру",
        "adm_th_role": "Рөлі",
        "adm_th_joined": "Тіркелген күні",
        "adm_btn_credits": "+ Кредит",
        "adm_mod_add_credits": "Кредит қосу",
        "adm_models_title": "AI Модельдері",
        "adm_btn_manage_models": "Модельдерді басқару",
        "adm_models_desc": "Replicate модельдерін қосу және баптау.",
        "adm_no_provs": "Провайдерлер жоқ",
        "adm_no_users": "Қолданушылар табылмады",
        "adm_status_active": "Белсенді",
        "adm_status_active": "Белсенді",
        "adm_status_disabled": "Өшірулі",
        "adm_btn_add_model": "Replicate моделін қосу",
        "adm_th_ref": "ID Моделі",
        "adm_th_type": "Түрі",
        "adm_th_example": "Мысал",
        "adm_btn_conf": "Баптау",
        "adm_mod_add_new": "Жаңа модель қосу",
        "adm_lbl_ref": "Replicate ID",
        "adm_ph_ref": "owner/name (мыс. stability-ai/sdxl)",
        "adm_help_fetch": "Соңғы нұсқа автоматты түрде жүктеледі.",
        "adm_btn_fetch": "Қосу",
        "adm_no_models": "Модельдер жоқ.",
        "adm_role_admin": "Админ",
        "adm_role_user": "Қолданушы",
        "adm_btn_cancel": "Болдырмау",
        "adm_btn_add_bal": "Толықтыру",
        "adm_txt_add_cred_for": "Кредиттер кімге:",

        "adm_prov_configured": "Бапталған провайдерлер",
        "adm_th_updated": "Жаңартылған",
        "adm_status_valid": "Жарамды",
        "adm_status_invalid": "Жарамсыз",
        "adm_status_nottested": "Тексерілмеген",
        "adm_btn_del": "Жою",
        "adm_sel_placeholder": "Провайдерді таңдаңыз...",
        "adm_js_spaces": "Кілтте бос орын болмауы тиіс",
        "adm_js_invalid_fmt": "Форматы қате:",
        "adm_js_test_passed": "Сәтті өтті!",
        "adm_js_error": "Қате",
        "adm_js_testing": "Тексеруде...",


    },
    "ky": {
        "nav_dashboard": "Башкаруу панели",
        "nav_admin": "Админ",
        "nav_logout": "Чыгуу",
        "nav_back": "Артка",
        "nav_login": "Кирүү",
        "nav_signup": "Катталуу",
        "nav_settings": "Жөндөөлөр",
        "nav_signout": "Чыгуу",
        "nav_profile": "Профиль",
        "nav_billing": "Биллинг",
        "nav_topup": "Толуктоо",
        "nav_generations": "Генерациялар",
        "nav_workshop": "Устакана",
        "nav_models": "Моделдер",
        "nav_providers": "Провайдерлер",
        "nav_users": "Колдонуучулар",
        "nav_curr_balance": "Учурдагы баланс",
        
        "land_hero_title": "ИИ менен искусство жаратыңыз",
        "land_hero_desc": "ArtLine API аркылуу укмуштуудай сүрөттөрдү жана видеолорду секунддарда жаратыңыз. Жөнөкөй кредит системасы.",
        "land_cta_dash": "Панелге өтүү",
        "land_cta_start": "Баштоо",
        "land_cta_login": "Кирүү",
        "land_pricing_title": "Баалар",
        
        "price_starter": "Башталгыч",
        "price_pro": "Про",
        "price_ent": "Бизнес",
        "price_img": "Сүрөт",
        "price_vid": "Видео",
        "price_credits": "Кредит",
        "price_std_speed": "Стандарт ылдамдык",
        "price_prio_supp": "Приоритеттүү колдоо",
        "price_bulk": "Жапырт генерация",
        "price_api": "API жеткиликтүү",
        "price_247": "24/7 Колдоо",

        "auth_login_title": "Кирүү",
        "auth_signup_title": "Катталуу",
        "auth_email": "Email дарек",
        "auth_pass": "Сыр сөз",
        "auth_btn_signin": "Кирүү",
        "auth_btn_create": "Аккаунт түзүү",
        "auth_link_need_acc": "Аккаунт керекпи? Катталыңыз",
        "auth_link_have_acc": "Аккаунт барбы? Кириңиз",
        "auth_err_creds": "Туура эмес маалымат",
        "auth_err_email_taken": "Email катталган",

        "balance_title": "Баланс",
        "balance_desc": "Генерация үчүн кредиттер (CR) колдонулат",
        "buy_credits": "100 CR сатып алуу (1000 ₽)",
        "payment_integ": "(Төлөм системасы кошула элек)",
        "create_job": "Жаңы жумуш",
        "format_label": "Формат",
        "model_label": "AI Модели",
        "prompt_label": "Промпт",
        "prompt_placeholder": "Келечектеги шаардын кинематографиялык көрүнүшү...",
        "generate_btn": "Жаратуу",
        "fmt_image": "Сүрөт",
        "fmt_video": "Видео",
        "wb_mode_image": "Сүрөт режими",
        "wb_mode_video": "Видео режими",
        "wb_tab_txt2img": "Тексттен сүрөт",
        "wb_tab_img2img": "Сүрөттөн сүрөт",
        "wb_prompt_tips": "Кеңештер",
        "wb_select_model": "Модель тандоо",
        "wb_limit_msg": "Лимит бүттү.",
        "wb_subscribe": "Жазылуу",
        "wb_generating": "Генерация...",
        "wb_started": "Башталды",
        "wb_comm_gallery": "Коомчулук иштери",
        "wb_loading_gal": "Галерея жүктөлүүдө...",
        "wb_no_models": "Моделдер жок",
        "wb_gen_failed": "Генерация оңунан чыкпады",
        "btn_view": "Көрүү",

        
        "gallery_title": "Галерея",
        "no_jobs_title": "Жумуштар жок",
        "no_jobs_desc": "Алгачкы шедевриңизди жаратыңыз!",
        
        "status_queued": "Кезекте",
        "status_running": "Аткарылууда",
        "status_succeeded": "Даяр",
        "status_failed": "Ката",
        "modal_details": "Жумуш чоо-жайы",
        "modal_id": "ID",
        "modal_date": "Күнү",
        "modal_status": "Абалы",
        "modal_cost": "Баасы",
        "modal_prompt": "Промпт",
        "modal_download": "Түпнусканы жүктөө",

        "adm_dash_title": "Админ панели",
        "adm_back_dash": "Панелге кайтуу",
        "adm_stat_users": "Бардык колдонуучулар",
        "adm_stat_jobs": "Бардык жумуштар",
        "adm_stat_active": "Активдүү",
        "adm_stat_credits": "Бардык кредиттер",
        
        "adm_prov_title": "AI Провайдерлери",
        "adm_btn_manage": "Башкаруу",
        "adm_prov_desc": "OpenAI, Stability баскычтарын жөндөө.",
        "adm_btn_seed": "Демо маалыматтар",
        "adm_btn_add": "Провайдер кошуу",
        "adm_th_provider": "Провайдер",
        "adm_th_name": "Аты",
        "adm_th_key": "Ачкыч (Акыркы 4)",
        "adm_th_status": "Абалы",
        "adm_th_actions": "Аракеттер",
        "adm_lbl_name_alias": "Аты / Лакап",
        "adm_lbl_apikey": "API Ачкыч",
        "adm_btn_test": "Текшерүү",
        "adm_btn_save": "Сактоо",

        "adm_users_title": "Колдонуучуларды башкаруу",
        "adm_recent_users": "Жаңылар",
        "adm_manage_desc": "Кредиттер жана укуктарды башкаруу.",
        "adm_btn_view_all": "Баарын көрүү",
        "adm_th_role": "Ролу",
        "adm_th_joined": "Катталган күнү",
        "adm_btn_credits": "+ Кредит",
        "adm_mod_add_credits": "Кредит кошуу",
        "adm_models_title": "AI Моделдери",
        "adm_btn_manage_models": "Моделдерди башкаруу",
        "adm_models_desc": "Replicate моделдерин кошуу жана жөндөө.",
        "adm_no_provs": "Провайдерлер жок",
        "adm_no_users": "Колдонуучулар табылган жок",
        "adm_status_active": "Активдүү",
        "adm_status_active": "Активдүү",
        "adm_status_disabled": "Өчүрүлгөн",
        "adm_btn_add_model": "Replicate моделин кошуу",
        "adm_th_ref": "ID Модели",
        "adm_th_type": "Түрү",
        "adm_th_example": "Мисал",
        "adm_btn_conf": "Жөндөө",
        "adm_mod_add_new": "Жаңы модель кошуу",
        "adm_lbl_ref": "Replicate ID",
        "adm_ph_ref": "owner/name (мис. stability-ai/sdxl)",
        "adm_help_fetch": "Акыркы версия автоматтык түрдө жүктөлөт.",
        "adm_btn_fetch": "Кошуу",
        "adm_no_models": "Модельдер жок.",
        "adm_role_admin": "Админ",
        "adm_role_user": "Колдонуучу",
        "adm_btn_cancel": "Жокко чыгаруу",
        "adm_btn_add_bal": "Толуктоо",
        "adm_txt_add_cred_for": "Кредиттер кимге:",

        "adm_prov_configured": "Жөндөлгөн провайдерлер",
        "adm_th_updated": "Жаңартылган",
        "adm_status_valid": "Жарамдуу",
        "adm_status_invalid": "Жарамсыз",
        "adm_status_nottested": "Текшерилбеген",
        "adm_btn_del": "Өчүрүү",
        "adm_sel_placeholder": "Провайдерди тандаңыз...",
        "adm_js_spaces": "Ачкычта бош орун болбошу керек",
        "adm_js_invalid_fmt": "Форматы туура эмес:",
        "adm_js_test_passed": "Ийгиликтүү өттү!",
        "adm_js_error": "Ката",
        "adm_js_testing": "Текшерүүдө...",


    }
}

SUPPORTED_LANGUAGES = ["en", "ru", "kk", "ky"]

class FallbackDict(dict):
    """
    Dictionary that falls back to a default language (ru) if key is missing.
    Usage: t = FallbackDict(target_lang_dict, fallback_lang_dict)
    """
    def __init__(self, target: dict, fallback: dict):
        super().__init__(target)
        self.fallback = fallback

    def __getitem__(self, key):
        if key in self:
            return super().__getitem__(key)
        return self.fallback.get(key, f"[{key}]")

    def __getattr__(self, key):
        try:
            return self[key]
        except KeyError:
            return f"[{key}]"

def get_t(request: Request) -> dict:
    """Get translation dictionary for the current language with fallback to RU."""
    lang = request.cookies.get("artline_lang", "ru")
    if lang not in TRANSLATIONS:
        lang = "ru"
    
    # Always fallback to RU
    return FallbackDict(TRANSLATIONS.get(lang, {}), TRANSLATIONS["ru"])

def get_current_lang(request: Request) -> str:
    """Get current language code."""
    lang = request.cookies.get("artline_lang", "ru")
    if lang not in SUPPORTED_LANGUAGES:
        lang = "ru"
    return lang
