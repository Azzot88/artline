{% for job in jobs[:6] %}
<div class="ratio ratio-1x1 bg-dark rounded border border-secondary overflow-hidden position-relative"
    title="{{ job.prompt }}">
    {% if job.kind == 'video' %}
    <!-- Check if result_url exists -->
    {% if job.result_url %}
    <video src="{{ job.result_url }}" class="w-100 h-100 object-fit-cover"></video>
    {% else %}
    <div class="d-flex align-items-center justify-content-center h-100 text-white-50 bg-secondary">
        <i class="bi bi-hourglass-split"></i>
        {% if job.status != 'succeeded' and job.status != 'failed' %}
        <button id="sync-btn-{{ job.id }}" onclick="app.syncJob('{{ job.id }}'); return false;"
            class="btn btn-sm btn-dark position-absolute top-50 start-50 translate-middle rounded-circle shadow">
            <i class="bi bi-arrow-repeat"></i>
        </button>
        {% endif %}
    </div>
    {% endif %}
    <i class="bi bi-camera-reels position-absolute top-0 end-0 m-1 text-white small shadow"></i>
    {% else %}
    <!-- Image -->
    {% if job.result_url %}
    <img src="{{ job.icon_url or job.result_url }}" class="w-100 h-100 object-fit-cover">
    {% else %}
    <div class="d-flex align-items-center justify-content-center h-100 text-white-50 bg-secondary">
        <div class="spinner-border text-light spinner-border-sm mb-2" role="status"></div>
        <!-- Sync Button Overlay -->
        {% if job.status != 'succeeded' and job.status != 'failed' %}
        <button id="sync-btn-{{ job.id }}" onclick="app.syncJob('{{ job.id }}'); return false;"
            class="btn btn-sm btn-dark position-absolute top-50 start-50 translate-middle rounded-circle shadow"
            style="z-index: 10;">
            <i class="bi bi-arrow-repeat"></i>
        </button>
        {% endif %}
    </div>
    {% endif %}
    {% endif %}

    <!-- Link overlay -->
    <a href="#" onclick="showSection('history'); return false;" class="stretched-link"></a>
</div>
{% endfor %}